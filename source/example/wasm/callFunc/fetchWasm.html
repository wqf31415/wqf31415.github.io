<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Fetch wasm</title>
		<script src="fetchWasm.js"></script>
		<script>
			let obj = {
				imports: {
					imported_func: function(arg){
					console.log(arg);
				}
			};
			fetch('jsCallCFunc.wasm') // 获取 .wasm
			  .then(resp => resp.arrayBuffer()) // 将响应转换成 ArrayBuffer
			  .then(arrBuf => WebAssembly.instantiate(arrBuf, obj))
			  .then(res => {
					console.log('res:',res)
					res.instance.exports.sayHi();
					return res.instance;
				}); // 使用 WebAssembly.instantiate() 将 ArrayBuffer 编译和实例化
			console.log(obj);
		</script>
	</head>
	<body>
	</body>
</html>