---
title: Rustå­¦ä¹ ç¬”è®°2-RuståŸºç¡€è¯­æ³•
tags:
  - Rust
  - å¼€å‘
categories:
  - Rust
date: 2024-05-24 21:45:30
---

### æ¦‚è¿°

è¿™ç¯‡æ–‡ç« ä»‹ç»äº† Rust è¯­è¨€çš„åŸºç¡€è¯­æ³•è§„åˆ™ï¼ŒåŒ…æ‹¬ Rust ä¸­æœ€åŸºç¡€çš„ç¨‹åºç»“æ„ã€æ•°æ®ç±»å‹ã€å˜é‡å®šä¹‰ã€å‡½æ•°å®šä¹‰ã€åˆ†æ”¯ä¸å¾ªç¯ç»“æ„ã€‚



### ä¸€ä¸ªç®€å•çš„ Rust ç¨‹åºä»£ç 

```rust
fn main() { 
    // å®šä¹‰å˜é‡
    let mut name = "C/C++";
    println!("Hello, {}!", name); // æ‰“å°è¾“å‡º
    name = "Rust"; // ä¿®æ”¹å˜é‡å€¼
    println!("Hello, {}!", name);
}
```



<!-- more -->



### Rust åŸºç¡€ä»£ç ç»“æ„

Rust æ˜¯ä¸€ç§å¤§å°å†™æ•æ„Ÿçš„ç¼–ç¨‹è¯­è¨€ã€‚

Rust è¯­å¥ä½¿ç”¨åˆ†å· `;` ç»“å°¾ï¼Œä»£ç å—ä½¿ç”¨å¤§æ‹¬å· `{}` åŒ…æ‹¬ã€‚

åœ¨ Rust ä¸­ï¼Œä½¿ç”¨ `fn` å…³é”®å­—å®šä¹‰å‡½æ•°ï¼Œä½¿ç”¨ `let` å…³é”®å­—å®šä¹‰å˜é‡ã€‚

Rust ä¸­ç¨‹åºå…¥å£ä¸º `main` å‡½æ•°ã€‚



### Rust æ³¨é‡Š

#### å•è¡Œæ³¨é‡Š

å’Œå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒRust ä½¿ç”¨åŒæ–œæ  `//` æ·»åŠ å•è¡Œæ³¨é‡Šï¼Œå•è¡Œæ³¨é‡Šå¯ä»¥æ·»åŠ åœ¨ç‹¬ç«‹è¡Œæˆ–è¡Œå°¾ã€‚

```rust
// å®šä¹‰å˜é‡
let mut name = "C/C++"; // å®šä¹‰å˜é‡
```

> `//` ä¼šå°†æ ‡è®°å¤„è‡³åé¢ç¬¬ä¸€ä¸ªæ¢è¡Œç¬¦çš„å†…å®¹æ ‡è¯†ä¸ºæ³¨é‡Šã€‚



#### å¤šè¡Œæ³¨é‡Š

Rust ä½¿ç”¨ `/**/` æ·»åŠ å¤šè¡Œæ³¨é‡Šã€‚

```rust
/* 
 æ³¨é‡Š1
 æ³¨é‡Š2
*/

/*æ³¨é‡Š1*/ print!("abc"); /* æ³¨é‡Š2 */
```

> æ³¨ï¼šä¸Šè¿°ç¨‹åºå°†è¾“å‡º abc



#### æ–‡æ¡£æ³¨é‡Š

Rust ä¸­ä½¿ç”¨ä¸‰æ–œæ  `///` æ·»åŠ æ–‡æ¡£æ³¨é‡Šï¼Œä½¿ç”¨æ–‡æ¡£æ³¨é‡Šå‡½æ•°åå°†åœ¨ ide ä¸­å¿«æ·çœ‹åˆ°å‡½æ•°çš„æ³¨é‡Šä¿¡æ¯ã€‚

æ–‡æ¡£æ³¨é‡Šçš„å†…å®¹è¿˜å¯ä»¥ ä½¿ç”¨ `cargo doc` å‘½ä»¤ç”Ÿæˆå¯¹åº”çš„ html æ–‡æ¡£ã€‚

æ–‡æ¡£æ³¨é‡Šä¸­å¯ä»¥ä½¿ç”¨ markdown è¯­æ³•æ·»åŠ æ–‡æ¡£æ ¼å¼ã€‚

```rust
fn main() { 
    print_hello();
}

/// # print_hello
/// > This function can print `hello`
fn print_hello()->(){
    print!("hello");
}
```



### Rust å®šä¹‰å˜é‡

#### ä¸å¯å˜å˜é‡ä¸å¯å˜å˜é‡

Rust ä¸­ä½¿ç”¨ `let` å…³é”®å­—å®šä¹‰å˜é‡ï¼Œä»¥æ­¤å®šä¹‰çš„å˜é‡æ˜¯ä¸å¯å˜çš„ï¼Œå³ä¸èƒ½é‡æ–°èµ‹å€¼ã€‚

å¦‚æœè¦å®šä¹‰å¯å˜çš„å˜é‡ï¼Œéœ€è¦ä½¿ç”¨ `let mut` å…³é”®å­—å®šä¹‰ã€‚

```rust
fn main() { 
    let a = 1; // å®šä¹‰ä¸€ä¸ªä¸å¯å˜å˜é‡ a
    let mut b = 2; // å®šä¹‰ä¸€ä¸ªå¯å˜å˜é‡ b
    // a = 2; // å°†æŠ¥é”™ cannot mutate immutable variable `a`
    b = 3;
    let ä¸­æ–‡ = "ä½ å¥½"; // å˜é‡åå¯ä»¥æ˜¯ä¸­æ–‡ï¼Œä½†ä¸æ¨èä½¿ç”¨ä¸­æ–‡å‘½å
    println!("{}", ä¸­æ–‡);
}
```

> ä»¥ä¸Šä»£ç åœ¨ç¼–è¯‘æ—¶å°†æŠ¥é”™ï¼Œæç¤º ``cannot mutate immutable variable `a` `` ï¼Œæ„æ€æ˜¯ä¸èƒ½ä¿®æ”¹ä¸å¯å˜å˜é‡ aã€‚

> **ä¸ºä»€ä¹ˆ Rust ä¸­çš„å˜é‡ä¸å¯å˜ï¼Ÿ** 
>
> åœ¨å¤§é‡çš„ç¼–ç¨‹å®è·µä¸­ï¼Œäººä»¬å‘ç°ä¸€ä¸ªè§„å¾‹ï¼Œå¼€å‘è€…å¸¸å¸¸ä¼šç”¨å˜é‡å­˜å‚¨ä¸€ä¸ªä¸å¯æ”¹å˜çš„å€¼ï¼Œä»…ä»…æ˜¯ä¸ºäº†å°†è¿™ä¸ªå€¼å­˜å‚¨èµ·æ¥ï¼Œåé¢å¥½ç”¨ã€‚è¿™äº›ç”¨é€”ä¸Šä¸å¯å˜çš„å˜é‡ï¼Œå¾€å¾€æå¤§åœ°å½±å“å¹¶å‘ç¨‹åºä¸­å¯¹å˜é‡çš„ä½¿ç”¨ï¼Œå› æ­¤ Rust é»˜è®¤çŠ¶æ€ä¸‹ä¿æŠ¤äº†æ‰€æœ‰çš„å˜é‡ã€‚



#### æŒ‡å®šå˜é‡ç±»å‹

Rust æ˜¯é™æ€ç¼–è¯‘è¯­è¨€ï¼Œåœ¨ç¼–è¯‘æ—¶å¿…é¡»çŸ¥é“æ‰€æœ‰å˜é‡çš„ç±»å‹ã€‚

åœ¨ Rust ä¸­ï¼Œä¸ºå˜é‡èµ‹å€¼åï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®èµ‹çš„å€¼è‡ªåŠ¨æ¨æ–­å‡ºå˜é‡çš„ç±»å‹ï¼Œå¦‚æœä¸èµ‹å€¼åˆ™å¿…é¡»æŒ‡æ˜æ•°æ®ç±»å‹ï¼Œå¦åˆ™ç¼–è¯‘å°†æŠ¥é”™ã€‚

å¦‚æœå¯èƒ½çš„ç±»å‹æ¯”è¾ƒå¤šï¼ˆå¦‚æŠŠ String è½¬æˆæ•´æ•°çš„ `parse` æ–¹æ³•ï¼‰ï¼Œä¹Ÿå¿…é¡»æ·»åŠ ç±»å‹æ ‡è¯†ï¼Œå¦åˆ™ç¼–è¯‘ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ `let x: u32 = "200".parse().expect("Not a number")`ã€‚

å½“æˆ‘ä»¬éœ€è¦æŒ‡å®šæ•°æ®ç±»å‹æ—¶ï¼Œå¯ä»¥åœ¨å˜é‡ååæ·»åŠ  `:` å’Œç±»å‹æ ‡è¯†ï¼Œæ¥æŒ‡å®šè¯¥å˜é‡çš„æ•°æ®ç±»å‹ã€‚

```rust
let x = 1; // è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º i32
let y = 3.14; // è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º f64
let z = 1_u8; // è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º u8
let s = "hello"; // è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º &str
let bb = false; // è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º bool
let cc;	// è‡ªåŠ¨æ¨æ–­ç±»å‹ä¸º i32
cc = 1;
// let dd; // ç¼–è¯‘æŠ¥é”™ type annotations needed

let a: i8 = 1; // æŒ‡å®šç±»å‹ä¸º i8Â·
let mut b: u8 = 255; // æŒ‡å®šç±»å‹ä¸º u8
let c: f32 = 3.14; // æŒ‡å®šç±»å‹ä¸º f32
let mut s2: &str = "hello"; // æŒ‡å®šç±»å‹ä¸º &str
let bb2: bool = true; // æŒ‡å®šç±»å‹ä¸º bool
```

> æ³¨ï¼šåœ¨ç»™å˜é‡èµ‹å€¼æ—¶ï¼Œå³ä¾§çš„å…·ä½“å€¼ç§°ä¸ºå­—é¢é‡ï¼Œå­—é¢é‡å€¼åé¢å¯ä»¥é€šè¿‡ä¸‹åˆ’çº¿ `_` åŠ ç±»å‹æ–¹å¼æŒ‡å®šå­—é¢é‡çš„æ•°æ®ç±»å‹ï¼Œå¦‚ `_u8` æŒ‡å®šå€¼ä¸º `u8` ç±»å‹ã€‚

Rust é»˜è®¤å°†æ•´å½¢æ•°å­—æ¨æ–­ä¸º `i32` ç±»å‹ï¼Œå°†æµ®ç‚¹å‹æ•°å­—æ¨æ–­ä¸º `f64` ç±»å‹ã€‚



#### å˜é‡çš„éšè—ï¼ˆshadowingï¼‰

åœ¨ Rust ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒåå­—å£°æ˜æ–°çš„å˜é‡ï¼Œæ–°çš„å˜é‡å°±ä¼š shadowï¼ˆéšè—ï¼Œæˆ–ç§°ä¸ºé®è”½ã€é‡å½±ï¼‰ä¹‹å‰å£°æ˜çš„åŒåå˜é‡ã€‚

```rust
let a = 100; // é¦–æ¬¡å£°æ˜å˜é‡ a
// a = -100; // æŠ¥é”™ï¼Œæ— æ³•æ•ˆæœä¸å¯å˜å˜é‡çš„å€¼
let a = -100; // éšè—ä¹‹å‰çš„å˜é‡ aï¼Œæ–°çš„å˜é‡ a å€¼ä¸º -100
let a = a + 100; // éšè—ä¹‹å‰çš„å˜é‡ aï¼Œæ–°çš„å˜é‡ a å€¼ä¸º ä¹‹å‰ a çš„å€¼+100ï¼Œå€¼ä¸º 0
let a = "hello"; // éšè—ä¹‹å‰çš„å˜é‡ aï¼Œæ–°çš„å˜é‡ a æ•°æ®ç±»å‹ä¸º `&str` ï¼Œå€¼ä¸º hello
```

> éšè—æ˜¯ Rust ä¸­æ¯”è¾ƒé‡è¦å’Œç‰¹åˆ«çš„æ¦‚å¿µï¼Œåœ¨å…¶ä»–ç¼–ç¨‹è¯­è¨€æ²¡æœ‰è¿™ç§è¯­æ³•è§„åˆ™ã€‚



#### å¸¸é‡ï¼ˆconstantï¼‰

Rust ä¸­ä½¿ç”¨ `const` å®šä¹‰å¸¸é‡ï¼Œå¸¸é‡åœ¨å£°æ˜æ—¶å¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ï¼Œå¸¸é‡èµ‹å€¼åä¸å¯å˜ã€‚

å¸¸é‡åä½¿ç”¨å…¨å¤§å†™å­—æ¯ï¼Œå¤šä¸ªå­—æ¯é—´ä½¿ç”¨ä¸‹åˆ’çº¿ `_` åˆ†éš”ã€‚

å¸¸é‡åœ¨å…¶å£°æ˜çš„ä½œç”¨åŸŸå†…ä¸€ç›´æœ‰æ•ˆã€‚

```rust
const PI: f64 = 3.14;
const MAX_CNT: i32 = 100;
```



> å¸¸é‡ä¸ä¸å¯å˜å˜é‡çš„åŒºåˆ«ï¼š
>
> - å¸¸é‡ä¸å¯ä½¿ç”¨ mutï¼Œå¸¸é‡æ°¸è¿œéƒ½æ˜¯ä¸å¯å˜çš„ã€‚
> - å£°æ˜å¸¸é‡ä½¿ç”¨ `const` å…³é”®å­—ï¼Œå¿…é¡»æŒ‡å®šæ•°æ®ç±»å‹ã€‚
> - å¸¸é‡å¯ä»¥åœ¨ä»»ä½•ä½œç”¨åŸŸä¸­å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸï¼Œä½¿ç”¨ let å£°æ˜çš„å˜é‡åªèƒ½åœ¨å‡½æ•°ä¸­ä½¿ç”¨ã€‚
> - å¸¸é‡åªèƒ½ç»‘å®šåˆ°å¸¸é‡è¡¨è¾¾å¼ï¼Œæ— æ³•ç»‘å®šåˆ°å‡½æ•°çš„è°ƒç”¨ç»“æœæˆ–åªèƒ½åœ¨è¿è¡Œæ—¶æ‰èƒ½è®¡ç®—å‡ºçš„å€¼ã€‚



#### é™æ€å˜é‡ï¼ˆstaticï¼‰

é™æ€å˜é‡å¯åœ¨å‡½æ•°å¤–å£°æ˜ï¼Œè¢«æ‰€æœ‰å‡½æ•°å…±äº«ã€‚

ä½¿ç”¨ `static` å…³é”®å­—å£°æ˜é™æ€å˜é‡ï¼Œå£°æ˜æ—¶å¿…é¡»æŒ‡å®šç±»å‹å’Œåˆå§‹å€¼ï¼Œå¦‚ `static MAX_CNT:i32 = 100;`ã€‚

é»˜è®¤é™æ€å˜é‡æ˜¯ä¸å¯æ”¹å˜çš„ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¦ä½¿ç”¨ `static mut` å£°æ˜ï¼Œå¦‚ `static mut CURR_CNT:i32 = 0;`ã€‚

Rust è®¤ä¸ºä¿®æ”¹é™æ€å˜é‡å€¼æ˜¯ â€œä¸å®‰å…¨â€ è¡Œä¸ºï¼Œè¦æ”¾åœ¨ `unsafe` å—æˆ–å‡½æ•°ä¸­ã€‚å› ä¸ºåœ¨å¤šçº¿ç¨‹ç¨‹åºä¸­ï¼ŒåŒæ—¶æœ‰å¤šä¸ªçº¿ç¨‹ä¿®æ”¹é™æ€å˜é‡å€¼ï¼Œä¼šå‡ºç°ä¸å¯é¢„æµ‹çš„æƒ…å†µã€‚

```rust
static MAX_CNT:i32 = 100;
static mut CURR_CNT:i32 = 0;

fn main() {
    // MAX_CNT = 1; // ä¼šæŠ¥é”™ï¼ŒMAX_CNT æ˜¯æ— æ³•ä¿®æ”¹çš„
    unsafe {
        CURR_CNT = 1; // CURR_CNT æ˜¯å¯ä¿®æ”¹çš„ï¼Œä½† Rust è®¤ä¸ºè¿™ç§æ“ä½œæ˜¯ä¸å®‰å…¨çš„ï¼Œè¦æ”¾åœ¨ unsafe å—æˆ–å‡½æ•°ä¸­
    }
}
```





### Rust æ•°æ®ç±»å‹

#### å­—é¢é‡

å­—é¢é‡æ˜¯æŒ‡åœ¨ç¨‹åºä¸­æ— éœ€å˜é‡ä¿å­˜ï¼Œç”¨äºè¡¨ç¤ºå›ºå®šçš„å€¼ï¼Œå¯ç›´æ¥è¡¨ç¤ºä¸ºä¸€ä¸ªå…·ä½“çš„æ•°å­—æˆ–å­—ç¬¦ä¸²çš„å€¼ï¼Œå³æ•°æ®åœ¨ç¨‹åºä¸­çš„ä¹¦å†™æ ¼å¼ã€‚å­—é¢é‡åªèƒ½ä½œä¸ºå³å€¼å‡ºç°ï¼Œæ‰€è°“å³å€¼æ˜¯æŒ‡ç­‰å·å³è¾¹çš„å€¼ã€‚

åœ¨ Rust ä¸­ï¼Œä¸»è¦æœ‰å››ç§å­—é¢é‡ç±»å‹ï¼šæ•´æ•°ç±»å‹ã€æµ®ç‚¹ç±»å‹ã€å¸ƒå°”ç±»å‹ã€å­—ç¬¦ç±»å‹ã€‚

##### æ•´æ•°çš„å­—é¢å€¼

æ•´å½¢å­—é¢é‡ä¸­é—´å¯ä»¥åŠ  `_` å¢å¼ºæ•°æ®å¯è¯»æ€§ï¼Œåå…­è¿›åˆ¶ä»¥ `0x` æ‰“å¤´ï¼Œå…«è¿›åˆ¶ä»¥ `0o` æ‰“å¤´ï¼ŒäºŒè¿›åˆ¶ä»¥ `0b` æ‰“å¤´ï¼Œå­—èŠ‚ç±»å‹ä»¥ `b''` è¡¨ç¤ºã€‚

é™¤äº† byte ç±»å‹ï¼Œå…¶ä»–æ•°å€¼å­—é¢å€¼éƒ½å…è®¸ä½¿ç”¨ç±»å‹åç¼€ï¼Œå¦‚ `25u8` ã€‚

| è¿›åˆ¶           | ç¤ºä¾‹                           | å¤‡æ³¨           |
| -------------- | ------------------------------ | -------------- |
| åè¿›åˆ¶         | 10_086ï¼Œ255u8ã€100_000_086_i64 |                |
| åå…­è¿›åˆ¶       | 0xffï¼Œ0xFFFF_FFFFu32           |                |
| å…«è¿›åˆ¶         | 0o177ã€0o77_i8ã€0o777_777_u32  |                |
| äºŒè¿›åˆ¶         | 0b1111_0000                    |                |
| å­—èŠ‚ï¼ˆu8ç±»å‹ï¼‰ | b'A'                           | ä»…é™äº u8 ç±»å‹ |

```rust
let a = 10_086;
let b = 255u8;
let c = 100_000_086_i64;
let d = 0xff;
let e = 0xFFFF_FFFFu32;
let g = 0o77_i8;
let h = 0o777_777_u32;
let i = 0b1111_0000;
let j = 0b11_111_111u8;
let k = b'A';
```



##### æµ®ç‚¹å‹å­—é¢é‡

æµ®ç‚¹å‹ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹åˆ’çº¿ `_` å¢å¼ºæ•°æ®å¯è¯»æ€§ï¼Œä¹Ÿå¯ä»¥æ·»åŠ ç±»å‹åç¼€ã€‚å¦‚

```rust
let a = 1.0;
let b: f32 = 2.0;
let c = 3.0_f32;
let d = 10_086.123;
let e = 100_86.123f32;
```



##### å¸ƒå°”å‹å­—é¢é‡

Rust ä¸­å¸ƒå°”ç±»å‹å­—é¢é‡åŒ…æ‹¬ `true` å’Œ `false` ã€‚



##### å­—ç¬¦å‹å­—é¢é‡

å­—ç¬¦å‹å­—é¢é‡ä»¥å•å¼•å· `''` åŒ…æ‹¬ï¼Œ å¦‚ `A`ã€`'ä½ '` ã€`'\t'` ã€‚



#### åŸºç¡€æ•°æ®ç±»å‹

##### æ•´å½¢ï¼ˆIntegerï¼‰

æ•´å½¢å³æ•´æ•°ï¼ŒRust ä¸­æ•´å½¢åˆ†ä¸ºæœ‰ç¬¦å·æ•´å½¢ï¼ˆintegerï¼‰å’Œæ— ç¬¦å·æ•´å½¢ï¼ˆunsigned integerï¼‰ï¼Œæœ‰ç¬¦å·æ•´å½¢æ ‡è¯†ç¬¦ä»¥ `i` æ‰“å¤´ï¼Œæ— ç¬¦å·æ•´å½¢æ ‡è¯†ä»¥ `u` æ‰“å¤´ï¼Œåé¢çš„æ•°å­—è¡¨ç¤ºæ•°æ®å çš„ä½æ•°ï¼ˆbitï¼‰ã€‚

Rust ä¸­é»˜è®¤çš„æ•´å½¢ç±»å‹æ˜¯ `i32` ã€‚

| é•¿åº¦   | æœ‰ç¬¦å·æ•´å½¢ | æ— ç¬¦å·æ•´å½¢ |
| ------ | ---------- | ---------- |
| 8bit   | i8         | u8         |
| 16bit  | i16        | u16        |
| 32bit  | i32        | u32        |
| 64bit  | i64        | u64        |
| 128bit | i128       | u128       |
| arch   | isize      | usize      |

> æ³¨ï¼š`arch` é•¿åº¦ç”±è¿è¡Œç¨‹åºçš„è®¡ç®—æœºç³»ç»Ÿæ¶æ„ç¡®å®šï¼Œå¦‚åœ¨ 32 ä½æ¶æ„ä¸­é•¿åº¦ä¸º 32bitï¼Œåœ¨ 64 ä½æ¶æ„ä¸­é•¿åº¦ä¸º 64bitã€‚
>
> `isize` å’Œ `usize` çš„ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯å¯¹æŸç§é›†åˆè¿›è¡Œç´¢å¼•æ“ä½œã€‚



**æ•´æ•°çš„æº¢å‡º**ï¼šå½“ä¸ºæ•´å½¢å˜é‡èµ‹å€¼æ—¶ï¼Œå¦‚æœè¶…å‡ºäº†è¯¥ç±»å‹çš„è¾¹ç•Œï¼Œæ ¹æ®ç¨‹åºç¼–è¯‘æ¨¡å¼ä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

- è°ƒè¯•æ¨¡å¼ä¸‹ç¼–è¯‘ï¼šRustä¼šæ£€æŸ¥æ•´æ•°æº¢å‡ºï¼Œå¦‚æœå‘ç”Ÿæº¢å‡ºï¼Œç¨‹åºåœ¨è¿è¡Œæ—¶å°±ä¼š panicï¼ˆææ…Œï¼Œå¤§è‡´å¯ç†è§£æˆå¼‚å¸¸ï¼‰ã€‚
- å‘å¸ƒæ¨¡å¼ä¸‹ï¼ˆ`--release`ï¼‰ç¼–è¯‘ï¼šRust ä¸ä¼šæ£€æŸ¥å¯èƒ½å¯¼è‡´ panic çš„æ•´æ•°æº¢å‡ºï¼Œå¦‚æœå‘ç”Ÿæº¢å‡ºï¼Œ Rust ä¼šæ‰§è¡Œ "ç¯ç»•" æ“ä½œï¼Œå¦‚ä¸º u8 å˜é‡èµ‹å€¼ 256 ä¼šå˜æˆ 0ï¼Œèµ‹å€¼ 257 ä¼šå˜æˆ 1ã€‚



##### æµ®ç‚¹å‹ï¼ˆFloating-Pointï¼‰

æµ®ç‚¹å‹å³å°æ•°ï¼ŒRust ä¸­æµ®ç‚¹å‹æœ‰åŒç²¾åº¦æµ®ç‚¹å‹ `f64` å’Œå•ç²¾åº¦æµ®ç‚¹å‹ `f32` ï¼Œé•¿åº¦åˆ†åˆ«ä¸º 64bit å’Œ 32bitã€‚

Rust çš„æµ®ç‚¹å‹ä½¿ç”¨ IEEE-754 æ ‡å‡†æ¥è¡¨è¿°ã€‚

Rust ä¸­é»˜è®¤çš„æµ®ç‚¹å‹ç±»å‹æ˜¯ `f64` ï¼Œåœ¨ç°ä»£è®¡ç®—æœºå¤„ç†å™¨ä¸­å¯¹ä¸¤ç§ æµ®ç‚¹æ•°çš„è®¡ç®—é€Ÿåº¦å‡ ä¹ç›¸åŒï¼Œä½† 64 ä½æµ®ç‚¹æ•°ç²¾åº¦æ›´é«˜ã€‚



##### å¸ƒå°”å‹ï¼ˆBooleanï¼‰

å¸ƒå°”å€¼è¡¨ç¤ºæ˜¯æˆ–å¦ä¸¤ç§çŠ¶æ€ï¼ŒRust ä¸­å¸ƒå°”å‹ä¸º `bool` ï¼Œå  1 ä¸ªå­—èŠ‚ï¼Œå€¼ä¸º `true` æˆ– `false` ã€‚

æ³¨æ„ï¼ŒRust ä¸­å¸ƒå°”å€¼ä¸èƒ½æ˜¯æ•°å­—ï¼Œä¸èƒ½åƒæŸäº›ç¼–ç¨‹è¯­è¨€ä¸­ 0 è¡¨ç¤º falseï¼Œ1 è¡¨ç¤º trueã€‚



##### å­—ç¬¦å‹ï¼ˆCharï¼‰

å­—ç¬¦å‹è¡¨ç¤ºå•ä¸ªå­—ç¬¦ï¼Œåœ¨ Rust ä¸­å­—ç¬¦å‹ä»¥ `char` è¡¨ç¤ºï¼Œå•ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ª Unicode å­—ç¬¦ï¼Œé•¿åº¦ä¸º 4 ä¸ªå­—èŠ‚ï¼Œè¿™ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€æœ‰åŒºåˆ«ã€‚

å­—ç¬¦å€¼ä»¥å•å¼•å·åŒ…æ‹¬ï¼Œå¦‚æœæ˜¯ç‰¹æ®Šå­—ç¬¦éœ€è¦ä½¿ç”¨è½¬ä¹‰ç¬¦ `\` è¿›è¡Œè½¬ä¹‰ï¼Œå¦‚å•å¼•å· `'\''` ã€‚

å­—ç¬¦å€¼å¯ä»¥æ˜¯ä¸­æ–‡ã€è—æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡ã€ç‰¹æ®Šå­—ç¬¦ã€emoji è¡¨æƒ…ç­‰åˆæ³• Unicode å­—ç¬¦ã€‚

 ```rust
 let a = 'ä½ ';
 let b = 'b';
 let c: char = 'C';
 let d: char = '\t';
 let e: char = '\'';
 let f: char = 'à½€';
 let g: char = 'ğŸ˜‚';
 ```



#### å…ƒç»„ï¼ˆTupleï¼‰

å…ƒç»„æ˜¯ä¸€ç³»åˆ—æ•°æ®çš„ç»„åˆï¼Œå¯ä»¥åŒ…å«ä¸åŒç±»å‹æ•°æ®ã€‚å…ƒç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ï¼Œä¸€æ—¦å£°æ˜å°±æ— æ³•æ”¹å˜ã€‚

Rust ä¸­å…ƒç»„çš„å€¼ç”¨å°æ‹¬å· `()` åŒ…æ‹¬ï¼Œå€¼ä¹‹é—´ä»¥é€—å· `,` åˆ†éš”ï¼›å…ƒç»„çš„ç±»å‹å®šä¹‰ä»¥å°æ‹¬å· `()` åŒ…æ‹¬ï¼Œå…ƒç´ ç±»å‹ä»¥é€—å· `,` åˆ†éš”ã€‚

å–å…ƒç»„ç±»å‹çš„å€¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡ååŠ  `.` ç´¢å¼•æ–¹å¼å–å€¼ï¼Œå¦‚ `a.0` å–ç¬¬ä¸€ä¸ªå…ƒç´ å€¼ã€‚

å¯ä»¥ä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„ï¼ˆdestructureï¼‰å…ƒç»„æ¥è·å–å…ƒç´ çš„å€¼ã€‚

```rust
fn main() { 
    let a = (1, "hello", 3.14); // è‡ªåŠ¨æ¨æ–­ä¸ºå…ƒç»„ç±»å‹ï¼š(i32, &str, f64)
    println!("{},{},{}", a.0, a.1, a.2);

    let b: (i32, &str, f64) = (2, "world", 1.732);
    println!("{},{},{}", b.0, b.1, b.2);

    let (x,y,z) = b; // æ¨¡å¼åŒ¹é…ç»“æ„å…ƒç»„
    println!("{},{},{}", x, y, z);

    let mut c: (i32, &str, i32) = (1, "XiaoMing", 18); // åˆ›å»ºå¯å˜å…ƒç»„
    c.2 = 20; // ä¿®æ”¹å…ƒç»„æˆå‘˜å€¼
    println!("{}",c.2);
}
```



#### æšä¸¾ï¼ˆEnumï¼‰





#### ç»“æ„ä½“ï¼ˆStructï¼‰



#### æ•°ç»„ï¼ˆArrayï¼‰

æ•°ç»„æ˜¯ä¸€ç»„ç›¸åŒç±»å‹æ•°æ®çš„ç»„åˆç»“æ„ï¼Œæ•°ç»„æˆå‘˜æ•°é‡æ˜¯å›ºå®šä¸å˜çš„ã€‚

Rust ä¸­æ•°ç»„å€¼ä»¥ä¸­æ‹¬å· `[]` åŒ…æ‹¬ï¼Œå„å…ƒç´ å€¼ä¹‹é—´ä½¿ç”¨é€—å· `,` åˆ†éš”ï¼›æ•°ç»„å®šä¹‰ä½¿ç”¨ä¸­æ‹¬å·åŒ…å«ç±»å‹å’Œé•¿åº¦ `[ç±»å‹; æ•°ç»„å®¹é‡]` è¡¨ç¤ºï¼Œå¦‚å®šä¹‰ä¸€ä¸ª 3ä¸ªæˆå‘˜çš„ `i32` ç±»å‹æ•°ç»„ï¼Œç±»å‹ä¸º `[i32; 3]`ã€‚

å¦‚æœæ•°ç»„æˆå‘˜å€¼ç›¸åŒï¼Œå¯ä»¥ä½¿ç”¨ `[å€¼; æ•°ç»„é•¿åº¦]` æ–¹å¼åˆ›å»ºæ•°ç»„ï¼Œå¦‚ `let c = [3; 5]` ç›¸å½“äº `let c = [3, 3, 3, 3, 3]` ã€‚

ä½¿ç”¨ `[ç´¢å¼•å€¼]` è·å–æ•°ç»„ä¸­çš„å€¼ï¼Œå¦‚ `a[1]` ä¸ºæ•°ç»„ä¸­ç¬¬äºŒä¸ªå€¼ã€‚å¦‚æœè®¿é—®çš„ç´¢å¼•è¶…å‡ºæ•°ç»„èŒƒå›´ï¼Œç¼–è¯‘ä¼šé€šè¿‡ï¼Œè¿è¡Œæ—¶ä¼šæŠ¥é”™ã€‚

```rust
fn main() { 
    let a = [1,2,3]; // è‡ªåŠ¨æ¨æ–­æ•°æ®ç±»å‹ä¸º [i32; 3]
    println!("{},{},{}",a[0],a[1],a[2]); //ä½¿ç”¨ç´¢å¼•ä¸‹æ ‡è®¿é—®æ•°ç»„å€¼

    let b: [&str; 3] = ["red", "green", "blue"];

    let c = [3; 5]; // å¡«å……æ•°ç»„ï¼Œç›¸å½“äº [3, 3, 3, 3, 3]

    let mut d: [i32; 3] = [0; 3]; // åˆ›å»ºå¯å˜æ•°ç»„
    d[0] = 1; // ä¿®æ”¹æ•°ç»„å€¼
    d[1] = 2;
    d[3] = 3;
}
```

> æ³¨ï¼šæ•°ç»„çš„æ•°æ®å­˜æ”¾åœ¨ stackï¼ˆæ ˆï¼‰ä¸Šï¼Œè€Œä¸æ˜¯ heapï¼ˆå †ï¼‰ä¸Šã€‚



#### åˆ‡ç‰‡



#### æŒ‡é’ˆ



### è¿ç®—

#### åŸºç¡€æ•°å­¦è¿ç®—

Rust ä¸­åŸºç¡€æ•°å­¦è¿ç®—åŒ…æ‹¬åŠ ï¼ˆ`+`ï¼‰ã€å‡ï¼ˆ`-`ï¼‰ã€ä¹˜ï¼ˆ`*`ï¼‰ã€é™¤ï¼ˆ`/`ï¼‰ã€å–æ¨¡ï¼ˆ`%`ï¼‰ã€‚

Rust æ•°å­¦è¿ç®—æ”¯æŒåœ¨è¿ç®—ç¬¦ååŠ ç­‰å· `=` å®ç°è‡ªè¿ç®—ï¼Œå¦‚ `x += 1` ã€‚

Rust ä¸­åŸºç¡€æ•°å­¦è¿ç®—å¿…é¡»ä¿è¯æ‰€æœ‰å‚ä¸è¿ç®—çš„å€¼æ˜¯ç›¸åŒç±»å‹ï¼Œå¦‚æœæ•°æ®ç±»å‹ä¸åŒï¼Œå°†æ— æ³•è®¡ç®—ã€‚ä¸åŒç±»å‹çš„æ•´å½¢ä¸èƒ½åšè®¡ç®—ï¼Œå¦‚ `1 + 1_i8`ï¼›æ•´å½¢å’Œæµ®ç‚¹å‹ä¸èƒ½ä¹‹é—´è®¡ç®—ï¼Œå¦‚ `1 + 1.1` ã€‚ä¸åŒç±»å‹çš„æ•°æ®éœ€è¦è¿›è¡Œç±»å‹è½¬æ¢åå†å‚ä¸è¿ç®—ï¼Œå¯ä»¥ä½¿ç”¨ `as` å…³é”®å­—è¿›è¡Œç±»å‹è½¬æ¢ï¼Œå¦‚ `1_i8 as f64`ã€‚

Rust ä¸­ä¸æ”¯æŒ `++` å’Œ `--` è¿ç®—ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªè¿ç®—ç¬¦ä¼šå½±å“ä»£ç å¯è¯»æ€§ï¼Œå¼€å‘è€…éš¾ä»¥æ„è¯†åˆ°å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ã€‚

```rust
fn main() {
    let a: i8 = 1 + 1 + 1;
    let b = 3 - 2;
    let c = 2 * 3;
    let d = 10 / 6;
    let e = 10 % 3;
    let f = 1.0 + 1.1;
    let g = 10.0 / 3.0;
    println!("a={}",a);
    println!("b={}",b);
    println!("c={}",c);
    println!("d={}",d);
    println!("e={}",e);
    println!("f={}",f);
    println!("g={}",g);
    // ä¸åŒç±»å‹æ•°æ®çš„è¿ç®—
    let h: i32 = 3;
    let i: f64 = 10_f64;
    let j = i / (h as f64); // å°†æ•´å½¢è½¬æˆæµ®ç‚¹å‹åå†å‚ä¸è®¡ç®—
    let k = 1_i32 + (1_i8 as i32); // å°†ä¸åŒæ•´å½¢è½¬æˆç›¸åŒæ•´å½¢åå†å‚ä¸è®¡ç®—
    println!("j={}",j);
    println!("k={}",k);
}
```



#### æ•°å­¦è¿ç®—å‡½æ•°

Rust ä¸­æ•´å½¢å’Œæµ®ç‚¹å‹æ•°æ®è‡ªå«ä¸€äº›æ•°å­¦è¿ç®—å‡½æ•°ï¼Œå¦‚æ•´å½¢çš„å¹³æ–¹ã€å–ç»å¯¹å€¼ï¼Œæµ®ç‚¹å‹çš„ä¸‰è§’å‡½æ•°è®¡ç®—ã€å¼€æ–¹ã€å¯¹æ•°è®¡ç®—ç­‰ã€‚

```rust
fn main() {
    let a: i8 = 0 - 1 - 1;
    let b = a.pow(3); // æ•´æ•°çš„å¹³æ–¹ï¼Œ-2 çš„ä¸‰æ¬¡æ–¹ç­‰äº -8
    println!("b={}",b);
    let c = a.abs(); // å–ç»å¯¹å€¼ï¼Œ-2 çš„ç»å¯¹å€¼ä¸º 2
    println!("c={}", c);
    let d: f32 = (30 as f32) * 3.141592654/180.0; // å°†è§’åº¦ 30åº¦è½¬ä¸ºå¼§åº¦
    let e = d.sin(); // æ±‚ä¸‰è§’å‡½æ•° sin30ï¼Œå€¼ä¸º 0.5
    let f = d.cos(); // æ±‚ä¸‰è§’å‡½æ•° cos30ï¼Œå€¼çº¦ç­‰äº 0.8660254
    println!("sin30={}", e);
    println!("cos30={}", f);
    let g = (3.0_f32).sqrt(); // æ±‚æ ¹å·3
    let h = g / 2.0; // äºŒåˆ†ä¹‹æ ¹å·3ï¼Œå³ cos30 çš„å€¼
    println!("h={}",h);
}
```

> æ³¨æ„ï¼šä¸‰è§’å‡½æ•°è¿ç®—æ—¶ä½¿ç”¨çš„æ˜¯å¼§åº¦ã€‚



#### é€»è¾‘è¿ç®—

é€»è¾‘è¿ç®—çš„ç»“æœæ˜¯å¸ƒå°”å‹ï¼Œé€»è¾‘è¿ç®—åŒ…æ‹¬é€»è¾‘åˆ¤æ–­å’Œå¸ƒå°”å€¼ä¹‹é—´çš„é€»è¾‘è¿ç®—ã€‚

| é€»è¾‘è¿ç®—å | é€»è¾‘è¿ç®—ç¬¦ | ç¤ºä¾‹            | ç¤ºä¾‹ç»“æœ |
| ---------- | ---------- | --------------- | -------- |
| å¤§äº       | `>`        | `3>2`           | `true`   |
| å°äº       | `<`        | `3<2`           | `false`  |
| ç­‰äº       | `==`       | `3==2`          | `false`  |
| å¤§äºæˆ–ç­‰äº | `>=`       | `3>=2`          | `true`   |
| å°äºæˆ–ç­‰äº | `<=`       | `3<=2`          | `false`  |
| ä¸ç­‰äº     | `!=`       | `3!=2`          | `true`   |
| ä¸è¿ç®—     | `&&`       | `true && false` | `false`  |
| æˆ–è¿ç®—     | `||`       | `true || false` | `true`   |
| éè¿ç®—     | `!`        | `!true`         | `false`  |
| å¼‚æˆ–è¿ç®—   | `^`        | `true^false`    | `true`   |



#### ä½è¿ç®—

ä½è¿ç®—æ˜¯æŒ‡æŒ‰äºŒè¿›åˆ¶ä½ï¼Œå³bitä½è¿›è¡Œè¿ç®—ï¼Œå¸¸ç”¨ä½è¿ç®—åŒ…æ‹¬ï¼šä¸ï¼ˆ`&`ï¼‰ã€æˆ–ï¼ˆ`|`ï¼‰ã€å–åï¼ˆ`!`ï¼‰ã€å¼‚æˆ–ï¼ˆ`^`ï¼‰ã€å·¦ç§»ï¼ˆ`<<`ï¼‰ã€å³ç§»ï¼ˆ`>>`ï¼‰ã€‚

```rust
fn main() {
    let a: u8 = 0b1101_1000;
    let b: u8 = 0b1010_0101;
    println!("a   =0b{:08b}", a);
    println!("b   =0b{:08b}", b);
    println!("a&b =0b{:08b}", a&b);
    println!("a|b =0b{:08b}", a|b);
    println!("!a  =0b{:08b}", !a);
    println!("!b  =0b{:08b}", !b);
    println!("a^b =0b{:08b}", a^b);
    println!("a<<1=0b{:08b}", a<<1);
    println!("a>>1=0b{:08b}", a>>1);
}
```

> ä½¿ç”¨ `println!()` å®æ‰“å°è¾“å‡ºæ—¶ï¼Œå¯ä»¥æŒ‡å®šè¾“å‡ºå‚æ•°çš„ç¼–ç æ ¼å¼ï¼Œæ–¹ä¾¿æŸ¥çœ‹ç»“æœã€‚
>
> å¦‚ä»¥ä¸Šä»£ç ç¤ºä¾‹ä¸­çš„ `{:08b}` è¡¨ç¤ºå°†å‚æ•°å€¼ä»¥äºŒè¿›åˆ¶æ ¼å¼è¾“å‡ºï¼ˆ`:b`ï¼‰ï¼Œè¾“å‡ºå†…å®¹é•¿åº¦ä¸º 8 ä½ï¼Œä¸è¶³ 8 ä½çš„å‰é¢è¡¥ 0ã€‚



### Rust å‡½æ•°å®šä¹‰

åœ¨ Rust ä¸­ä½¿ç”¨ `fn` å…³é”®å­—å®šä¹‰å‡½æ•°ï¼Œå‡½æ•°å®šä¹‰æ ¼å¼ä¸ºï¼š`fn å‡½æ•°å(å‚æ•°1:å‚æ•°1ç±»å‹, å‚æ•°2:å‚æ•°2ç±»å‹,...)->è¿”å›å€¼ç±»å‹ {å‡½æ•°å†…å®¹}`ï¼Œå®šä¹‰å‡½æ•°æ—¶å¯ä»¥ä¸åŠ å‚æ•°ï¼Œå³å®šä¹‰æ— å‚å‡½æ•°ï¼Œä¹Ÿå¯ä»¥ä¸æŒ‡å®šè¿”å›å€¼ç±»å‹ã€‚å‡½æ•°è°ƒç”¨æ–¹å¼ä¸º `å‡½æ•°å(å‚æ•°1, å‚æ•°2,...)`ã€‚

Rust ä¸­çš„å˜é‡åå’Œå‡½æ•°åä½¿ç”¨ snake case å‘½åè§„èŒƒï¼Œå³å…¨ä½¿ç”¨å°å†™å­—æ¯ï¼Œå•è¯é—´ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”ï¼Œå¦‚ say_helloã€‚

Rust å‡½æ•°ä¸åŒºåˆ†å®šä¹‰çš„å…ˆåé¡ºåºï¼Œä¸åƒ C è¯­è¨€è¦å…ˆå®šä¹‰æ‰èƒ½ä½¿ç”¨ã€‚

Rust ä¸­å‡½æ•°ä½“å¯åŒ…å«ä¸€äº›åˆ—è¯­å¥ï¼Œå¯é€‰ç”±ä¸€ä¸ªè¡¨è¾¾å¼ç»“æŸï¼Œ**å¤§å¤šæ•°å‡½æ•°ä¼šä»¥æœ€åä¸€ä¸ªè¡¨è¾¾å¼çš„å€¼ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼**ï¼Œå¦‚æœæƒ³æå‰è¿”å›å¯ä»¥ä½¿ç”¨ `return` å…³é”®å­—ã€‚

> è¯­å¥æ˜¯æ‰§è¡Œä¸€äº›åŠ¨ä½œçš„æŒ‡ä»¤ï¼Œå¦‚å‡½æ•°å®šä¹‰æˆ–ä»¥åˆ†å·ç»“å°¾çš„ä¸€å¥ä»£ç ã€‚åœ¨ Rust ä¸­ä¸å…è®¸å°†è¯­å¥èµ‹å€¼ç»™ä¸€ä¸ªå˜é‡ï¼Œå¦‚ `let a = (let b = 1)` æ˜¯ä¸åˆæ³•çš„ã€‚
>
> è¡¨è¾¾å¼å¯æ‰§è¡Œä¸€äº›è¿ç®—ï¼Œå¦‚ç®—å¼ `3+2`ï¼Œæœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå€¼ï¼Œæ‰€æœ‰å­—é¢å€¼éƒ½æ˜¯è¡¨è¾¾å¼ï¼Œå¦‚ `5` ã€`"hello"`ã€‚

```rust
fn main() { 
    say_hello(); // hello
    hello_someone("rust"); // hello, rust
    let a = get_five();
    println!("a = {}", a); // a = 5
    let b = plus_five(a);
    println!("b = {}", b); // b = 10
    let c = get_max(3, 5);
    println!("c = {}", c); // c = 5
}
  
// æ— å‚å‚æ•°
fn say_hello() {
    println!("hello");
}

// æœ‰å‚å‡½æ•°
fn hello_someone(name: &str) {
    println!("hello, {}", name);
}

// æ— å‚æœ‰è¿”å›å€¼å‡½æ•°
fn get_five() -> i32 {
    5
}

// æœ‰å‚æœ‰è¿”å›å€¼å‡½æ•°
fn plus_five(x: i32) -> i32 {
    x + 5
}

fn get_max(x: i32, y: i32) -> i32 {
    if x > y {
        return x; // ä½¿ç”¨ return å…³é”®å­—è¿”å›ç»“æœ
    }
    y // æœ€åä¸€ä¸ªè¡¨è¾¾å¼ä½œä¸ºå‡½æ•°è¿”å›å€¼
}
```



### Rust åˆ†æ”¯ç»“æ„

#### if-else åˆ†æ”¯



### Rust å¾ªç¯ç»“æ„

#### loop å¾ªç¯



#### while å¾ªç¯



#### for å¾ªç¯

